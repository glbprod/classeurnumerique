<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TechnoLab - Quiz Num√©rique & B√™ta</title>
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <!-- Font Awesome pour les ic√¥nes -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary: #4ade80;
            --secondary: #60a5fa;
            --dark: #1a1a2e;
            --light: #f8fafc;
            --danger: #f87171;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, var(--dark) 0%, #2d3748 100%);
            color: white;
            min-height: 100vh;
            padding: 2rem;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 2rem;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .header h1 {
            color: var(--primary);
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
        }

        .header p {
            color: #a0a0a0;
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        .student-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 0.75rem;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.05);
            color: white;
            font-size: 1rem;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(74, 222, 128, 0.2);
        }

        .question-block {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border-left: 4px solid var(--secondary);
        }

        .question-block h3 {
            color: var(--secondary);
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 0.75rem;
        }

        .option {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid transparent;
        }

        .option:hover {
            background: rgba(255, 255, 255, 0.08);
        }

        .option.selected {
            background: rgba(74, 222, 128, 0.2);
            border-color: var(--primary);
        }

        .option input[type="radio"] {
            width: auto;
            margin: 0;
        }

        /* Style pour les checkbox (choix multiples) */
        .option input[type="checkbox"] {
            width: auto;
            margin: 0;
            accent-color: var(--primary); /* Couleur de la coche */
        }

        /* Style quand l'option est s√©lectionn√©e */
        .option.selected-checkbox {
            background: rgba(74, 222, 128, 0.2);
            border-color: var(--primary);
        }


        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            margin-top: 1rem;
        }

        .btn:hover {
            background: #2dd4bf;
            transform: translateY(-2px);
        }

        .btn:disabled {
            background: #a0aec0;
            cursor: not-allowed;
            transform: none;
        }

        .success-message {
            display: none;
            text-align: center;
            padding: 1.5rem;
            background: rgba(74, 222, 128, 0.1);
            border-radius: 10px;
            margin-top: 1.5rem;
            border: 1px solid var(--primary);
        }

        .success-message h3 {
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .success-message p {
            color: #a0a0a0;
        }

        .question-number {
            background: var(--secondary);
            color: white;
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 1rem;
        }

        /* Ajoutez ce code dans la balise <style> de votre HTML */

        /* Style de base pour les selects */
        select {
            background-color: rgba(30, 41, 59, 0.8); /* Fond sombre l√©g√®rement transparent */
            color: white; /* Texte blanc */
            border: 1px solid rgba(255, 255, 255, 0.2); /* Bordure subtile */
            border-radius: 8px;
            padding: 0.75rem;
            width: 100%;
            font-size: 1rem;
            appearance: none; /* Supprime l'apparence par d√©faut */
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23ffffff'%3e%3cpath d='M7 10l5 5 5-5z'/%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 1em;
            transition: all 0.2s;
            cursor: pointer;
        }
        
        /* Style au survol */
        select:hover {
            border-color: rgba(255, 255, 255, 0.3);
            background-color: rgba(30, 41, 59, 0.9);
        }
        
        /* Style quand le select est focus */
        select:focus {
            outline: none;
            border-color: #4ade80; /* Couleur primaire (vert) */
            box-shadow: 0 0 0 2px rgba(74, 222, 128, 0.2);
            background-color: rgba(30, 41, 59, 0.95);
        }
        
        /* Style des options dans le dropdown */
        select option {
            background-color: #2d3748; /* Fond des options */
            color: white; /* Texte blanc */
            padding: 0.5rem;
            border-radius: 4px;
        }
        
        /* Style de l'option s√©lectionn√©e */
        select option:checked {
            background-color: rgba(74, 222, 128, 0.3); /* Fond vert clair pour la s√©lection */
            font-weight: bold;
        }
        
        /* Style de l'option survol√©e */
        select option:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        /* Pour les navigateurs WebKit (Chrome, Safari) */
        select::-ms-expand {
            display: none;
        }
        
        /* Fl√®che personnalis√©e pour Firefox */
        @-moz-document url-prefix() {
            select {
                padding-right: 2rem;
            }
        }


        @media (min-width: 768px) {
            .options-grid {
                grid-template-columns: 1fr 1fr;
            }

            .student-info {
                grid-template-columns: 1fr 1fr 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-laptop-code"></i> Quiz TechnoLab</h1>
            <p>Testez vos connaissances sur l'√©volution du num√©rique en technologie et les versions b√™ta</p>
        </div>

        <div class="student-info">
            <div class="form-group">
                <label for="studentName">Nom et pr√©nom</label>
                <input type="text" id="studentName" required placeholder="Ex: Dupont Jean">
            </div>
            <div class="form-group">
                <label for="studentClass">Classe</label>
                <select id="studentClass" required>
                    <option value="">S√©lectionnez...</option>
                    <option value="5√®me">5√®me</option>
                    <option value="4√®me">4√®me</option>
                    <option value="3√®me">3√®me</option>
                </select>
            </div>
            <div class="form-group">
                <label for="studentDate">Date</label>
                <input type="date" id="studentDate" required>
            </div>
        </div>

        <form id="technoQuiz">
        <!-- Question 1 (modifi√©e en choix multiples) -->
        <div class="question-block">
            <div class="question-number">1</div>
            <h3>Quelles sont les principales diff√©rences entre les cours de technologie il y a 20 ans et aujourd'hui ?<br>
            <small style="color: #a0a0a0; font-weight: normal;">(Plusieurs r√©ponses possibles)</small></h3>
            <div class="options-grid">
                <label class="option">
                    <input type="checkbox" name="q1" value="a">
                    <span>On utilisait uniquement des livres et des cahiers</span>
                </label>
                <label class="option">
                    <input type="checkbox" name="q1" value="b">
                    <span>On n'avait pas d'ordinateurs en classe</span>
                </label>
                <label class="option">
                    <input type="checkbox" name="q1" value="c">
                    <span>Les outils num√©riques (tablettes, logiciels, IA) ont r√©volutionn√© les m√©thodes d'apprentissage</span>
                </label>
                <label class="option">
                    <input type="checkbox" name="q1" value="d">
                    <span>Les professeurs √©crivaient tout au tableau</span>
                </label>
                <label class="option">
                    <input type="checkbox" name="q1" value="e">
                    <span>Les √©l√®ves travaillaient davantage en projets collaboratifs</span>
                </label>
            </div>
        </div>

            <!-- Question 2 -->
            <div class="question-block">
                <div class="question-number">2</div>
                <h3>Qu'est-ce qu'une "version b√™ta" d'une application comme TechnoLab ?</h3>
                <div class="options-grid">
                    <label class="option">
                        <input type="radio" name="q2" value="a">
                        <span>La version finale et parfaite de l'application</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q2" value="b">
                        <span>Une version de test qui permet aux utilisateurs de donner leur avis pour l'am√©liorer</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q2" value="c">
                        <span>Une version payante r√©serv√©e aux professionnels</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q2" value="d">
                        <span>Un prototype qui ne fonctionne pas du tout</span>
                    </label>
                </div>
            </div>

            <!-- Question 3 -->
            <div class="question-block">
                <div class="question-number">3</div>
                <h3>Quel outil num√©rique n'existait PAS dans les cours de technologie il y a 10 ans ?</h3>
                <div class="options-grid">
                    <label class="option">
                        <input type="radio" name="q3" value="a">
                        <span>Les ordinateurs</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q3" value="b">
                        <span>Les imprimantes 3D</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q3" value="c">
                        <span>Les chatbots intelligents comme TechnoChat</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q3" value="d">
                        <span>Les logiciels de dessin technique</span>
                    </label>
                </div>
            </div>

            <!-- Question 4 -->
            <div class="question-block">
                <div class="question-number">4</div>
                <h3>Pourquoi est-il important que les √©l√®ves testent TechnoLab en version b√™ta ?</h3>
                <div class="options-grid">
                    <label class="option">
                        <input type="radio" name="q4" value="a">
                        <span>Pour que le professeur ait moins de travail</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q4" value="b">
                        <span>Pour cr√©er une application qui r√©pond vraiment √† leurs besoins</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q4" value="c">
                        <span>Pour gagner de l'argent</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q4" value="d">
                        <span>Pour remplacer le classeur num√©rique actuel</span>
                    </label>
                </div>
            </div>

            <!-- Question 5 -->
            <div class="question-block">
                <div class="question-number">5</div>
                <h3>Quel avantage les outils comme TechnoLab apportent-ils par rapport aux cahiers traditionnels ?</h3>
                <div class="options-grid">
                    <label class="option">
                        <input type="radio" name="q5" value="a">
                        <span>On peut les perdre plus facilement</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q5" value="b">
                        <span>Ils permettent un suivi personnalis√© des comp√©tences et des activit√©s</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q5" value="c">
                        <span>Ils co√ªtent plus cher</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q5" value="d">
                        <span>Ils ne fonctionnent que sur un seul ordinateur</span>
                    </label>
                </div>
            </div>

            <!-- Question 6 -->
            <div class="question-block">
                <div class="question-number">6</div>
                <h3>Quelle technologie moderne n'est PAS utilis√©e dans TechnoLab ?</h3>
                <div class="options-grid">
                    <label class="option">
                        <input type="radio" name="q6" value="a">
                        <span>React (pour cr√©er l'interface)</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q6" value="b">
                        <span>Firebase (pour sauvegarder les donn√©es)</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q6" value="c">
                        <span>La r√©alit√© virtuelle avec des casques</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q6" value="d">
                        <span>JavaScript (pour les interactions)</span>
                    </label>
                </div>
            </div>

            <!-- Question 7 -->
            <div class="question-block">
                <div class="question-number">7</div>
                <h3>Que doivent faire les √©l√®ves s'ils trouvent un bug dans TechnoLab ?</h3>
                <div class="options-grid">
                    <label class="option">
                        <input type="radio" name="q7" value="a">
                        <span>Ne rien dire pour ne pas emb√™ter le professeur</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q7" value="b">
                        <span>Noter pr√©cis√©ment ce qui ne marche pas et le signaler</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q7" value="c">
                        <span>Essayer de le r√©parer eux-m√™mes</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q7" value="d">
                        <span>Arr√™ter d'utiliser l'application</span>
                    </label>
                </div>
            </div>

            <!-- Question 8 -->
            <div class="question-block">
                <div class="question-number">8</div>
                <h3>Quelle comp√©tence du cycle 4 est la plus li√©e au d√©veloppement d'applications comme TechnoLab ?</h3>
                <div class="options-grid">
                    <label class="option">
                        <input type="radio" name="q8" value="a">
                        <span>Imaginer une solution en r√©ponse √† un besoin</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q8" value="b">
                        <span>Concevoir, √©crire et tester un programme</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q8" value="c">
                        <span>Analyser le fonctionnement d'un syst√®me</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q8" value="d">
                        <span>Utiliser des outils num√©riques</span>
                    </label>
                </div>
            </div>

            <!-- Question 9 -->
            <div class="question-block">
                <div class="question-number">9</div>
                <h3>Quel est l'avantage d'utiliser des outils comme Firebase dans TechnoLab ?</h3>
                <div class="options-grid">
                    <label class="option">
                        <input type="radio" name="q9" value="a">
                        <span>√áa permet de jouer √† des jeux vid√©o</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q9" value="b">
                        <span>√áa sauvegarde les donn√©es en temps r√©el et les synchronise entre tous les appareils</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q9" value="c">
                        <span>√áa remplace compl√®tement le professeur</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q9" value="d">
                        <span>√áa permet d'imprimer des documents</span>
                    </label>
                </div>
            </div>

            <!-- Question 10 -->
            <div class="question-block">
                <div class="question-number">10</div>
                <h3>Si tu pouvais ajouter une fonctionnalit√© √† TechnoLab, ce serait :</h3>
                <div class="options-grid">
                    <label class="option">
                        <input type="radio" name="q10" value="a">
                        <span>Un syst√®me de chat entre √©l√®ves</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q10" value="b">
                        <span>Un g√©n√©rateur automatique de fiches de r√©vision</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q10" value="c">
                        <span>Un simulateur de circuits √©lectroniques</span>
                    </label>
                    <label class="option">
                        <input type="radio" name="q10" value="d">
                        <span>Un autre chose (√† pr√©ciser dans les commentaires)</span>
                    </label>
                </div>
                <div class="form-group" style="margin-top: 1rem;">
                    <label for="q10_comment">Pr√©cisez votre id√©e :</label>
                    <input type="text" id="q10_comment" placeholder="Votre suggestion...">
                </div>
            </div>

            <!-- <div class="form-group">
                <label for="comments">Autres commentaires ou suggestions pour TechnoLab :</label>
                <textarea id="comments" rows="3" placeholder="Dites-nous ce que vous en pensez..."></textarea>
            </div> -->

            <button type="button" id="sendToFirebase" class="btn">
                <i class="fas fa-paper-plane"></i> Envoyer mes r√©ponses
            </button>
        </form>

        <div id="successMessage" class="success-message">
            <h3>‚úÖ Merci pour votre participation !</h3>
            <p>Vos r√©ponses ont √©t√© enregistr√©es et aideront √† am√©liorer TechnoLab.</p>
            <p>Vous pouvez maintenant fermer cette fen√™tre.</p>
        </div>
    </div>

    <script>
        // Configuration Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyDIvzEk0xKVdRC0r9D_tBGnKPX29Fqkem4",
            authDomain: "form-results-b285b.firebaseapp.com",
            projectId: "form-results-b285b",
            storageBucket: "form-results-b285b.firebasestorage.app",
            messagingSenderId: "662462446647",
            appId: "1:662462446647:web:0fe6315cc0c189185513b2"
        };

        // Initialisation Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        console.log('‚úÖ Firebase initialis√©');

        // Gestion des options s√©lectionn√©es (pour checkbox et radio)
        document.querySelectorAll('.option').forEach(option => {
            option.addEventListener('click', function(e) {
                const input = this.querySelector('input');
                if (input.type === 'radio') {
                    // Comportement radio (une seule r√©ponse)
                    const options = this.parentElement.querySelectorAll('.option');
                    options.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                } else if (input.type === 'checkbox') {
                    // Comportement checkbox (choix multiples)
                    this.classList.toggle('selected-checkbox');
                    input.checked = !input.checked;
                }
            });
        });


        // Envoi des donn√©es √† Firebase
        document.getElementById('sendToFirebase').addEventListener('click', async function() {
            const form = document.getElementById('technoQuiz');
            const successMessage = document.getElementById('successMessage');

            // V√©rifier la validit√© du formulaire
            const requiredFields = ['studentName', 'studentClass', 'studentDate'];
            let isValid = true;

            requiredFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (!field.value) {
                    field.style.borderColor = 'var(--danger)';
                    isValid = false;
                } else {
                    field.style.borderColor = 'rgba(255, 255, 255, 0.2)';
                }
            });

            if (!isValid) {
                alert('Veuillez remplir tous les champs obligatoires (nom, classe, date).');
                return;
            }

            // D√©sactiver le bouton
            const originalText = this.textContent;
            this.disabled = true;
            this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Envoi en cours...';

            try {
                // Collecter les r√©ponses
                const responses = {
                    nom_eleve: document.getElementById('studentName').value,
                    classe: document.getElementById('studentClass').value,
                    date: document.getElementById('studentDate').value,
                    timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                    date_soumission: new Date().toISOString(),

                    // R√©ponses aux questions
                    // R√©cup√©ration des r√©ponses multiples pour Q1
                    q1: Array.from(document.querySelectorAll('input[name="q1"]:checked')).map(el => el.value) || ['non_repondu'],
                    q2: document.querySelector('input[name="q2"]:checked')?.value || 'non_repondu',
                    q3: document.querySelector('input[name="q3"]:checked')?.value || 'non_repondu',
                    q4: document.querySelector('input[name="q4"]:checked')?.value || 'non_repondu',
                    q5: document.querySelector('input[name="q5"]:checked')?.value || 'non_repondu',
                    q6: document.querySelector('input[name="q6"]:checked')?.value || 'non_repondu',
                    q7: document.querySelector('input[name="q7"]:checked')?.value || 'non_repondu',
                    q8: document.querySelector('input[name="q8"]:checked')?.value || 'non_repondu',
                    q9: document.querySelector('input[name="q9"]:checked')?.value || 'non_repondu',
                    q10: document.querySelector('input[name="q10"]:checked')?.value || 'non_repondu',
                    q10_comment: document.getElementById('q10_comment').value,
                    // commentaires: document.getElementById('comments').value
                };

                console.log('üì§ Envoi des donn√©es:', responses);

                // Envoyer √† Firebase
                const docRef = await db.collection('techno_quiz_beta').add(responses);

                console.log('‚úÖ Document enregistr√© avec ID:', docRef.id);

                // Afficher le message de succ√®s
                document.getElementById('technoQuiz').style.display = 'none';
                successMessage.style.display = 'block';

                // R√©initialiser le formulaire apr√®s 5 secondes (optionnel)
                setTimeout(() => {
                    document.getElementById('technoQuiz').reset();
                    document.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    document.getElementById('technoQuiz').style.display = 'block';
                    successMessage.style.display = 'none';
                    this.disabled = false;
                    this.textContent = originalText;
                }, 5000);

            } catch (error) {
                console.error('‚ùå Erreur lors de l\'envoi:', error);
                alert('Une erreur est survenue lors de l\'envoi. Veuillez r√©essayer.');
                this.disabled = false;
                this.textContent = originalText;
            }
        });

        // Protection par mot de passe (optionnel)
        (function() {
            const MOT_DE_PASSE = 'dev2025'; // Changez ici ou supprimez cette section
            let tentatives = 3;

            while (tentatives > 0) {
                const saisie = prompt('üîí Mot de passe requis pour acc√©der au quiz (demandez-le √† votre professeur) :');

                if (saisie === null) {
                    document.body.innerHTML = '<h1 style="text-align:center;margin-top:50px;">‚ùå Acc√®s annul√©</h1>';
                    throw new Error('Acc√®s annul√©');
                }

                if (saisie === MOT_DE_PASSE) {
                    return; // ‚úÖ Mot de passe correct
                }

                tentatives--;
                if (tentatives > 0) {
                    alert('‚ùå Mot de passe incorrect ! Il vous reste ' + tentatives + ' tentative(s).');
                }
            }

            // ============================================
            // CONFIRMATION AVANT FERMETURE
            // ============================================
            let formModified = false;
    
            document.getElementById('dnbForm').addEventListener('input', function() {
                formModified = true;
            });
    
            window.addEventListener('beforeunload', function(e) {
                if (formModified) {
                    e.preventDefault();
                    e.returnValue = '';
                    return '';
                }
            });

            document.body.innerHTML = '<h1 style="text-align:center;margin-top:50px;color:#f87171;">üîí Acc√®s refus√©</h1><p style="text-align:center;">Veuillez contacter votre professeur pour obtenir le mot de passe.</p>';
            throw new Error('Trop de tentatives');
        })();
    </script>
</body>
</html>
