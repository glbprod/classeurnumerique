<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DNB Techno - Vigie de Surveillance | TechnoLab</title>
    <link rel="stylesheet" href="style.css">
    
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    
    <style>
        /* Styles sp√©cifiques au sujet DNB */
        .dnb-header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: 35px;
            box-shadow: 0 10px 40px var(--shadow);
            margin-bottom: 40px;
            border: 2px solid rgba(74, 144, 226, 0.1);
            text-align: center;
        }

        .dnb-title {
            font-size: 2.5rem;
            color: var(--dark-blue);
            margin-bottom: 10px;
            font-weight: 700;
        }

        .dnb-subtitle {
            font-size: 1.2rem;
            color: var(--text-light);
            margin-bottom: 20px;
        }

        .dnb-badge {
            display: inline-block;
            background: linear-gradient(135deg, #FF6B6B, #FF8E53);
            color: white;
            padding: 8px 20px;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: 700;
            letter-spacing: 1px;
        }

        .context-box {
            background: linear-gradient(135deg, rgba(255, 107, 107, 0.1), rgba(255, 142, 83, 0.1));
            padding: 30px;
            border-radius: 25px;
            border: 2px solid rgba(255, 107, 107, 0.3);
            margin-bottom: 40px;
            border-left: 5px solid #FF6B6B;
        }

        .context-box h3 {
            color: #FF6B6B;
            font-size: 1.5rem;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .context-box p {
            color: var(--text-dark);
            line-height: 1.8;
            margin-bottom: 10px;
        }

        .question-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 35px;
            border-radius: 30px;
            box-shadow: 0 8px 30px var(--shadow);
            margin-bottom: 30px;
            border: 2px solid rgba(74, 144, 226, 0.1);
            transition: all 0.3s ease;
        }

        .question-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 50px var(--shadow-hover);
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(74, 144, 226, 0.2);
        }

        .question-number {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary-color);
        }

        .question-points {
            background: linear-gradient(135deg, var(--accent-color), #45B168);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 700;
        }

        .question-content h4 {
            color: var(--dark-blue);
            font-size: 1.3rem;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .question-content p {
            color: var(--text-light);
            line-height: 1.8;
            margin-bottom: 15px;
        }

        .input-field {
            width: 100%;
            padding: 15px;
            border: 2px solid rgba(74, 144, 226, 0.3);
            border-radius: 15px;
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.3s ease;
            margin: 10px 0;
            background: rgba(255, 255, 255, 0.8);
        }

        .input-field:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
        }

        textarea.input-field {
            min-height: 120px;
            resize: vertical;
        }

        .table-modern {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin: 20px 0;
            overflow: hidden;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .table-modern th {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }

        .table-modern td {
            padding: 15px;
            background: white;
            border-bottom: 1px solid rgba(74, 144, 226, 0.1);
        }

        .table-modern tr:last-child td {
            border-bottom: none;
        }

        .table-modern td input,
        .table-modern td select {
            width: 100%;
            padding: 10px;
            border: 2px solid rgba(74, 144, 226, 0.3);
            border-radius: 10px;
            font-size: 0.95rem;
        }

        .document-box {
            background: rgba(232, 244, 248, 0.5);
            padding: 25px;
            border-radius: 20px;
            border: 2px dashed var(--primary-color);
            text-align: center;
            margin: 20px 0;
        }

        .document-box img {
            max-width: 100%;
            height: auto;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            margin: 15px 0;
        }

        .document-box figcaption {
            color: var(--text-light);
            font-style: italic;
            margin-top: 15px;
        }

        .solutions-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .solution-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: rgba(74, 144, 226, 0.05);
            border-radius: 15px;
            border: 2px solid rgba(74, 144, 226, 0.1);
            transition: all 0.3s ease;
        }

        .solution-item:hover {
            background: rgba(74, 144, 226, 0.1);
            transform: translateX(5px);
        }

        .solution-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            font-weight: 700;
            font-size: 1.1rem;
        }

        .binary-input-group {
            display: flex;
            gap: 8px;
            justify-content: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .binary-box {
            width: 50px;
            height: 50px;
            text-align: center;
            font-size: 1.2rem;
            font-weight: bold;
            border: 2px solid var(--primary-color);
            border-radius: 10px;
            background: white;
            transition: all 0.3s ease;
        }

        .binary-box:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(80, 200, 120, 0.2);
            transform: scale(1.05);
        }

        .binary-label {
            font-size: 0.85rem;
            color: var(--text-light);
            text-align: center;
            margin-top: 5px;
        }

        .radio-group {
            display: flex;
            gap: 20px;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 20px;
            background: rgba(74, 144, 226, 0.05);
            border-radius: 15px;
            border: 2px solid rgba(74, 144, 226, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .radio-option:hover {
            background: rgba(74, 144, 226, 0.1);
            border-color: var(--primary-color);
        }

        .radio-option input[type="radio"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .formula-box {
            background: linear-gradient(135deg, rgba(74, 144, 226, 0.1), rgba(123, 104, 238, 0.1));
            padding: 20px;
            border-radius: 15px;
            border: 2px solid rgba(74, 144, 226, 0.2);
            font-family: 'Courier New', monospace;
            font-size: 1.1rem;
            margin: 15px 0;
            text-align: center;
        }

        .calc-zone {
            background: white;
            padding: 20px;
            border-radius: 15px;
            border: 2px solid var(--primary-color);
            margin: 15px 0;
        }

        .program-block {
            background: rgba(44, 62, 80, 0.05);
            border: 2px solid var(--dark-blue);
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .program-line {
            margin: 12px 0;
            padding: 12px;
            background: rgba(74, 144, 226, 0.05);
            border-left: 4px solid var(--primary-color);
            border-radius: 8px;
            font-family: 'Courier New', monospace;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 40px;
            flex-wrap: wrap;
        }

        .btn-submit {
            flex: 1;
            min-width: 200px;
            background: linear-gradient(135deg, var(--accent-color), #45B168);
            color: white;
            border: none;
            padding: 18px 35px;
            border-radius: 30px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(80, 200, 120, 0.3);
        }

        .btn-submit:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(80, 200, 120, 0.4);
        }

        .btn-submit:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn-reset {
            flex: 0.3;
            min-width: 150px;
            background: rgba(231, 76, 60, 0.9);
            color: white;
            border: none;
            padding: 18px 25px;
            border-radius: 30px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-reset:hover {
            background: rgba(231, 76, 60, 1);
            transform: translateY(-3px);
        }

        .success-message {
            background: linear-gradient(135deg, rgba(80, 200, 120, 0.1), rgba(69, 177, 104, 0.1));
            border: 2px solid var(--accent-color);
            border-left: 5px solid var(--accent-color);
            padding: 25px;
            border-radius: 20px;
            margin-top: 30px;
            display: none;
            animation: slideIn 0.5s ease-out;
        }

        .success-message h3 {
            color: var(--accent-color);
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        .error-message {
            background: linear-gradient(135deg, rgba(231, 76, 60, 0.1), rgba(192, 57, 43, 0.1));
            border: 2px solid #e74c3c;
            border-left: 5px solid #e74c3c;
            padding: 25px;
            border-radius: 20px;
            margin-top: 30px;
            display: none;
        }

        .error-message h3 {
            color: #e74c3c;
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        .student-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .info-group {
            display: flex;
            flex-direction: column;
        }

        .info-label {
            font-weight: 600;
            color: var(--dark-blue);
            margin-bottom: 8px;
            font-size: 0.95rem;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {
            .dnb-title {
                font-size: 1.8rem;
            }

            .question-card {
                padding: 25px;
            }

            .solutions-grid {
                grid-template-columns: 1fr;
            }

            .binary-input-group {
                gap: 5px;
            }

            .binary-box {
                width: 40px;
                height: 40px;
                font-size: 1rem;
            }

            .action-buttons {
                flex-direction: column;
            }

            .btn-reset {
                flex: 1;
            }
        }
    </style>
</head>
<body>
    <!-- Particules de papier en arri√®re-plan -->
    <div class="paper-particles"></div>

    <!-- Header avec navigation -->
    <header>
        <div class="container">
            <div class="logo">
                <span class="logo-icon">üöÄ</span>
                <h1>TechnoLab</h1>
                <span class="beta-badge">B√äTA</span>
            </div>
            <nav>
                <a href="TechnoLab.html" class="nav-link">‚Üê Retour</a>
                <a href="Presentation-TechnoLab.html" class="nav-link">Pr√©sentation</a>
            </nav>
        </div>
    </header>

    <!-- Contenu principal -->
    <section class="section">
        <div class="container">
            <!-- En-t√™te du sujet -->
            <div class="dnb-header">
                <h1 class="dnb-title">üî• DNB Technologie</h1>
                <p class="dnb-subtitle">Vigie de Surveillance des Incendies</p>
                <span class="dnb-badge">30 MINUTES ‚Ä¢ 25 POINTS</span>
            </div>

            <!-- Contexte -->
            <div class="context-box">
                <h3>üìã Contexte</h3>
                <p><strong>En 2022, les feux de for√™t ont d√©truit 62 000 hectares en France.</strong> Pour lutter contre les incendies, les for√™ts sont surveill√©es depuis des postes appel√©s vigies.</p>
                <p>Depuis une vigie, les pompiers ont une vue d√©gag√©e √† 360 degr√©s et peuvent localiser des d√©parts de feu sur une distance de plus de 20 km.</p>
                <p>Le syst√®me automatis√© de surveillance install√© sur le toit de la vigie est constitu√© de deux appareils photo.</p>
            </div>

            <!-- Formulaire -->
            <form id="dnbForm">
                <!-- Informations √©l√®ve -->
                <div class="question-card">
                    <div class="question-header">
                        <span class="question-number">üë§ Informations</span>
                    </div>
                    <div class="student-info">
                        <div class="info-group">
                            <label class="info-label">Nom et Pr√©nom <span style="color: #e74c3c;">*</span></label>
                            <input type="text" id="studentName" class="input-field" placeholder="Nom Pr√©nom" required>
                        </div>
                        <div class="info-group">
                            <label class="info-label">Classe <span style="color: #e74c3c;">*</span></label>
                            <input type="text" id="studentClass" class="input-field" placeholder="Ex: 3√®me A" required>
                        </div>
                    </div>
                </div>

                <!-- Document 1 -->
                <div class="document-box">
                    <figure style="margin: 0;">
                        <img src="https://latechnologieaucollege.netlify.app/src/Pages/DNB/img/vigie.png" 
                             alt="Sch√©ma de la vigie avec dimensions et composants">
                        <figcaption>
                            <strong>Document 1 :</strong> Vigie et son syst√®me automatis√© de surveillance
                        </figcaption>
                    </figure>
                </div>

                <!-- Question 1 -->
                <div class="question-card">
                    <div class="question-header">
                        <span class="question-number">‚ùì Question 1</span>
                        <span class="question-points">5 points</span>
                    </div>
                    <div class="question-content">
                        <h4>Analyse du besoin</h4>
                        <p><strong>1.1.</strong> Identifier le besoin que r√©pond ce syst√®me automatis√©.</p>
                        <textarea name="q1_besoin" class="input-field" placeholder="D√©crivez le besoin..."></textarea>

                        <p style="margin-top: 25px;"><strong>1.2.</strong> Compl√©ter le tableau ci-dessous :</p>
                        <table class="table-modern">
                            <thead>
                                <tr>
                                    <th>Entr√©es</th>
                                    <th>√âl√©ment associ√©</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>E1. Ordre de fonctionnement</td>
                                    <td><input type="text" name="q1_e1" placeholder="√âl√©ment..."></td>
                                </tr>
                                <tr>
                                    <td>E2. Commande de mise en marche</td>
                                    <td><input type="text" name="q1_e2" placeholder="√âl√©ment..."></td>
                                </tr>
                                <tr>
                                    <td>E3. Temp√©rature mesur√©e</td>
                                    <td><input type="text" name="q1_e3" placeholder="√âl√©ment..."></td>
                                </tr>
                                <tr>
                                    <td>E4. Image de la for√™t</td>
                                    <td><input type="text" name="q1_e4" placeholder="√âl√©ment..."></td>
                                </tr>
                                <tr>
                                    <td>E5. Alimentation √©lectrique</td>
                                    <td><input type="text" name="q1_e5" placeholder="√âl√©ment..."></td>
                                </tr>
                                <tr>
                                    <td>E6. Alerte donn√©e</td>
                                    <td><input type="text" name="q1_e6" placeholder="√âl√©ment..."></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Document 2 -->
                <div class="document-box">
                    <figure style="margin: 0;">
                        <img src="https://latechnologieaucollege.netlify.app/src/Pages/DNB/img/chaine-energie.png" 
                             alt="Cha√Æne d'√©nergie">
                        <figcaption>
                            <strong>Document 2 :</strong> Cha√Æne d'√©nergie du syst√®me
                        </figcaption>
                    </figure>
                </div>

                <!-- Question 2 -->
                <div class="question-card">
                    <div class="question-header">
                        <span class="question-number">‚ùì Question 2</span>
                        <span class="question-points">4 points</span>
                    </div>
                    <div class="question-content">
                        <h4>Cha√Æne d'√©nergie</h4>
                        <p><strong>2.1.</strong> Quelle est la nature de l'√©nergie en sortie du r√©gulateur de tension ?</p>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="q2_nature" value="mecanique" required>
                                <span>M√©canique</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="q2_nature" value="electrique">
                                <span>√âlectrique</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="q2_nature" value="thermique">
                                <span>Thermique</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="q2_nature" value="lumineuse">
                                <span>Lumineuse</span>
                            </label>
                        </div>

                        <p style="margin-top: 25px;"><strong>2.2.</strong> Combien de temps au maximum l'accumulateur permet-il de faire fonctionner le syst√®me ?</p>
                        <textarea name="q2_temps" class="input-field" placeholder="Montrez vos calculs et donnez le r√©sultat..."></textarea>
                    </div>
                </div>

                <!-- Document 3 -->
                <div class="document-box">
                    <figure style="margin: 0;">
                        <img src="https://latechnologieaucollege.netlify.app/src/Pages/DNB/img/chaine-information.png" 
                             alt="Cha√Æne d'information">
                        <figcaption>
                            <strong>Document 3 :</strong> Cha√Æne d'information du syst√®me
                        </figcaption>
                    </figure>
                </div>

                <!-- Question 3 -->
                <div class="question-card">
                    <div class="question-header">
                        <span class="question-number">‚ùì Question 3</span>
                        <span class="question-points">6 points</span>
                    </div>
                    <div class="question-content">
                        <h4>Calcul de la distance entre la vigie et le d√©part de feu</h4>
                        <p>La longueur de la base de la vigie est <strong>L = 1,5 m</strong>. L'angle de vision du d√©part de feu est <strong>Œ± = 0,45¬∞</strong>.</p>
                        
                        <div class="formula-box">
                            <strong>Formule :</strong> tan(Œ±) = L / D
                        </div>

                        <p>Pour trouver D, on peut utiliser : <strong>D = L / tan(Œ±)</strong></p>

                        <div class="calc-zone">
                            <p><strong>Montrez vos calculs :</strong></p>
                            <textarea name="q3_calculs" class="input-field" placeholder="D√©taillez vos calculs ici..."></textarea>

                            <p style="margin-top: 15px;"><strong>R√©sultat final :</strong></p>
                            <input type="text" name="q3_resultat" class="input-field" placeholder="Distance en m√®tres...">
                        </div>
                    </div>
                </div>

                <!-- Document 4 -->
                <div class="document-box">
                    <figure style="margin: 0;">
                        <img src="https://latechnologieaucollege.netlify.app/src/Pages/DNB/img/binaire-decimal.png" 
                             alt="Table de conversion binaire-d√©cimal">
                        <figcaption>
                            <strong>Document 4 :</strong> Table de conversion binaire-d√©cimal
                        </figcaption>
                    </figure>
                </div>

                <!-- Question 4 -->
                <div class="question-card">
                    <div class="question-header">
                        <span class="question-number">‚ùì Question 4</span>
                        <span class="question-points">5 points</span>
                    </div>
                    <div class="question-content">
                        <h4>Codage binaire de la temp√©rature</h4>
                        <p><strong>4.1.</strong> Le capteur de temp√©rature rel√®ve <strong>56¬∞C</strong>. Compl√©tez la conversion en binaire :</p>
                        
                        <div class="binary-input-group">
                            <div>
                                <input type="text" name="q4_b8" maxlength="1" pattern="[01]" class="binary-box" placeholder="0">
                                <div class="binary-label">128</div>
                            </div>
                            <div>
                                <input type="text" name="q4_b7" maxlength="1" pattern="[01]" class="binary-box" placeholder="0">
                                <div class="binary-label">64</div>
                            </div>
                            <div>
                                <input type="text" name="q4_b6" maxlength="1" pattern="[01]" class="binary-box" placeholder="0">
                                <div class="binary-label">32</div>
                            </div>
                            <div>
                                <input type="text" name="q4_b5" maxlength="1" pattern="[01]" class="binary-box" placeholder="0">
                                <div class="binary-label">16</div>
                            </div>
                            <div>
                                <input type="text" name="q4_b4" maxlength="1" pattern="[01]" class="binary-box" placeholder="0">
                                <div class="binary-label">8</div>
                            </div>
                            <div>
                                <input type="text" name="q4_b3" maxlength="1" pattern="[01]" class="binary-box" placeholder="0">
                                <div class="binary-label">4</div>
                            </div>
                            <div>
                                <input type="text" name="q4_b2" maxlength="1" pattern="[01]" class="binary-box" placeholder="0">
                                <div class="binary-label">2</div>
                            </div>
                            <div>
                                <input type="text" name="q4_b1" maxlength="1" pattern="[01]" class="binary-box" placeholder="0">
                                <div class="binary-label">1</div>
                            </div>
                        </div>

                        <p style="margin-top: 25px;"><strong>4.2.</strong> Convertissez en d√©cimal les valeurs binaires suivantes :</p>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                            <div>
                                <p><strong>0 0 1 0 1 0 1 1</strong> =</p>
                                <input type="text" name="q4_decimal_c1" class="input-field" placeholder="Valeur d√©cimale...">
                            </div>
                            <div>
                                <p><strong>1 0 0 1 0 0 0 0</strong> =</p>
                                <input type="text" name="q4_decimal_c2" class="input-field" placeholder="Valeur d√©cimale...">
                            </div>
                        </div>

                        <p style="margin-top: 25px;"><strong>4.3.</strong> L'alarme se d√©clenche si la temp√©rature d√©passe 70¬∞C. Parmi les deux valeurs converties, laquelle d√©clencherait l'alerte ?</p>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="q4_alerte" value="c1" required>
                                <span>La premi√®re (0 0 1 0 1 0 1 1)</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="q4_alerte" value="c2">
                                <span>La deuxi√®me (1 0 0 1 0 0 0 0)</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="q4_alerte" value="aucune">
                                <span>Aucune des deux</span>
                            </label>
                        </div>

                        <p style="margin-top: 15px;"><strong>Argumentez votre r√©ponse :</strong></p>
                        <textarea name="q4_argumentation" class="input-field" placeholder="Justifiez votre choix..."></textarea>
                    </div>
                </div>

                <!-- Document 5 -->
                <div class="document-box">
                    <figure style="margin: 0;">
                        <img src="https://latechnologieaucollege.netlify.app/src/Pages/DNB/img/programme.png" 
                             alt="Programme de surveillance">
                        <figcaption>
                            <strong>Document 5 :</strong> Programme de surveillance
                        </figcaption>
                    </figure>
                </div>

                <!-- Question 5 -->
                <div class="question-card">
                    <div class="question-header">
                        <span class="question-number">‚ùì Question 5</span>
                        <span class="question-points">5 points</span>
                    </div>
                    <div class="question-content">
                        <h4>Compl√©ter le programme</h4>
                        <p>Le programme ci-dessous g√®re la rotation et la prise de photos. Compl√©tez les √©l√©ments manquants en choisissant parmi les propositions suivantes :</p>

                        <div class="solutions-grid">
                            <div class="solution-item">
                                <span class="solution-number">1</span>
                                <span>Capteur de temp√©rature</span>
                            </div>
                            <div class="solution-item">
                                <span class="solution-number">2</span>
                                <span>Carte programmable</span>
                            </div>
                            <div class="solution-item">
                                <span class="solution-number">3</span>
                                <span>Prendre une photo</span>
                            </div>
                            <div class="solution-item">
                                <span class="solution-number">4</span>
                                <span>180¬∞</span>
                            </div>
                            <div class="solution-item">
                                <span class="solution-number">5</span>
                                <span>Moteur pas-√†-pas</span>
                            </div>
                        </div>

                        <div class="program-block">
                            <div class="program-line">
                                <strong>√âl√©ment 1 :</strong>
                                <select name="q5_element1" required>
                                    <option value="">-- Choisir --</option>
                                    <option value="1">Capteur de temp√©rature</option>
                                    <option value="2">Carte programmable</option>
                                    <option value="3">Prendre une photo</option>
                                    <option value="4">180¬∞</option>
                                    <option value="5">Moteur pas-√†-pas</option>
                                </select>
                            </div>
                            <div class="program-line">
                                <strong>√âl√©ment 2 :</strong>
                                <select name="q5_element2" required>
                                    <option value="">-- Choisir --</option>
                                    <option value="1">Capteur de temp√©rature</option>
                                    <option value="2">Carte programmable</option>
                                    <option value="3">Prendre une photo</option>
                                    <option value="4">180¬∞</option>
                                    <option value="5">Moteur pas-√†-pas</option>
                                </select>
                            </div>
                            <div class="program-line">
                                <strong>√âl√©ment 3 :</strong>
                                <select name="q5_element3" required>
                                    <option value="">-- Choisir --</option>
                                    <option value="1">Capteur de temp√©rature</option>
                                    <option value="2">Carte programmable</option>
                                    <option value="3">Prendre une photo</option>
                                    <option value="4">180¬∞</option>
                                    <option value="5">Moteur pas-√†-pas</option>
                                </select>
                            </div>
                            <div class="program-line">
                                <strong>√âl√©ment 4 :</strong>
                                <select name="q5_element4" required>
                                    <option value="">-- Choisir --</option>
                                    <option value="1">Capteur de temp√©rature</option>
                                    <option value="2">Carte programmable</option>
                                    <option value="3">Prendre une photo</option>
                                    <option value="4">180¬∞</option>
                                    <option value="5">Moteur pas-√†-pas</option>
                                </select>
                            </div>
                            <div class="program-line">
                                <strong>√âl√©ment 5 :</strong>
                                <select name="q5_element5" required>
                                    <option value="">-- Choisir --</option>
                                    <option value="1">Capteur de temp√©rature</option>
                                    <option value="2">Carte programmable</option>
                                    <option value="3">Prendre une photo</option>
                                    <option value="4">180¬∞</option>
                                    <option value="5">Moteur pas-√†-pas</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Boutons d'action -->
                <div class="action-buttons">
                    <button type="button" id="sendToFirebase" class="btn-submit">
                        üì§ Envoyer mes r√©ponses
                    </button>
                    <button type="reset" class="btn-reset">
                        üîÑ R√©initialiser
                    </button>
                </div>

                <!-- Messages de feedback -->
                <div id="successMessage" class="success-message">
                    <h3>‚úÖ R√©ponses enregistr√©es !</h3>
                    <p>Vos r√©ponses ont √©t√© sauvegard√©es avec succ√®s. Vous pouvez maintenant les relire ou demander une correction √† votre professeur.</p>
                </div>

                <div id="errorMessage" class="error-message">
                    <h3>‚ùå Erreur</h3>
                    <p id="errorText">Une erreur s'est produite lors de l'envoi.</p>
                </div>
            </form>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p>üöÄ TechnoLab - Plateforme d'apprentissage en Technologie | Version B√™ta</p>
            <p>Coll√®ge Moulin √† Vent - Pr√©paration DNB</p>
        </div>
    </footer>

    <script>
        // Animation des particules
        function createPaperParticles() {
            const container = document.querySelector('.paper-particles');
            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 20 + 's';
                particle.style.animationDuration = (15 + Math.random() * 10) + 's';
                container.appendChild(particle);
            }
        }

        createPaperParticles();

        // ============================================
        // GESTION FORMULAIRE
        // ============================================
        let formModified = false;

        document.getElementById('dnbForm').addEventListener('input', function() {
            formModified = true;
        });

        window.addEventListener('beforeunload', function(e) {
            if (formModified) {
                e.preventDefault();
                e.returnValue = '';
                return '';
            }
        });

        // Protection par mot de passe (optionnel)
        (function() {
            const MOT_DE_PASSE = 'dnb2025';
            let tentatives = 3;
            
            while (tentatives > 0) {
                const saisie = prompt('üîí Mot de passe requis pour acc√©der au sujet DNB :');
                
                if (saisie === null) {
                    document.body.innerHTML = '<h1 style="text-align:center;margin-top:50px;">‚ùå Acc√®s annul√©</h1>';
                    throw new Error('Acc√®s annul√©');
                }
                
                if (saisie === MOT_DE_PASSE) {
                    return;
                }
                
                tentatives--;
                if (tentatives > 0) {
                    alert('‚ùå Mot de passe incorrect ! Il vous reste ' + tentatives + ' tentative(s).');
                }
            }
            
            alert('üö´ Nombre de tentatives d√©pass√© !');
            document.body.innerHTML = '<h1 style="text-align:center;margin-top:50px;">‚ùå Acc√®s refus√©</h1>';
            throw new Error('Acc√®s refus√©');
        })();

        // ============================================
        // CONFIGURATION FIREBASE
        // ============================================
        const firebaseConfig = {
            apiKey: "AIzaSyDIvzEk0xKVdRC0r9D_tBGnKPX29Fqkem4",
            authDomain: "form-results-b285b.firebaseapp.com",
            projectId: "form-results-b285b",
            storageBucket: "form-results-b285b.firebasestorage.app",
            messagingSenderId: "662462446647",
            appId: "1:662462446647:web:0fe6315cc0c189185513b2"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        console.log('‚úÖ Firebase initialis√©');

        // ============================================
        // ENVOI DES R√âPONSES
        // ============================================
        document.getElementById('sendToFirebase').addEventListener('click', async function() {
            const form = document.getElementById('dnbForm');
            
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }
            
            const btn = this;
            const originalText = btn.textContent;
            btn.disabled = true;
            btn.textContent = '‚è≥ Envoi en cours...';
            
            try {
                const formData = new FormData(form);
                
                const binaryValue = 
                    (formData.get('q4_b8') || '') +
                    (formData.get('q4_b7') || '') +
                    (formData.get('q4_b6') || '') +
                    (formData.get('q4_b5') || '') +
                    (formData.get('q4_b4') || '') +
                    (formData.get('q4_b3') || '') +
                    (formData.get('q4_b2') || '') +
                    (formData.get('q4_b1') || '');
                
                const responses = {
                    nom_eleve: document.getElementById('studentName').value,
                    classe: document.getElementById('studentClass').value,
                    timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                    date_soumission: new Date().toISOString(),
                    
                    q1_besoin: formData.get('q1_besoin') || '',
                    q1_e1: formData.get('q1_e1') || '',
                    q1_e2: formData.get('q1_e2') || '',
                    q1_e3: formData.get('q1_e3') || '',
                    q1_e4: formData.get('q1_e4') || '',
                    q1_e5: formData.get('q1_e5') || '',
                    q1_e6: formData.get('q1_e6') || '',
                    
                    q2_nature: formData.get('q2_nature') || '',
                    q2_temps: formData.get('q2_temps') || '',
                    
                    q3_calculs: formData.get('q3_calculs') || '',
                    q3_resultat: formData.get('q3_resultat') || '',
                    
                    q4_binaire_complet: binaryValue,
                    q4_b8: formData.get('q4_b8') || '',
                    q4_b7: formData.get('q4_b7') || '',
                    q4_b6: formData.get('q4_b6') || '',
                    q4_b5: formData.get('q4_b5') || '',
                    q4_b4: formData.get('q4_b4') || '',
                    q4_b3: formData.get('q4_b3') || '',
                    q4_b2: formData.get('q4_b2') || '',
                    q4_b1: formData.get('q4_b1') || '',
                    q4_decimal_c1: formData.get('q4_decimal_c1') || '',
                    q4_decimal_c2: formData.get('q4_decimal_c2') || '',
                    q4_alerte: formData.get('q4_alerte') || '',
                    q4_argumentation: formData.get('q4_argumentation') || '',
                    
                    q5_element1: formData.get('q5_element1') || '',
                    q5_element2: formData.get('q5_element2') || '',
                    q5_element3: formData.get('q5_element3') || '',
                    q5_element4: formData.get('q5_element4') || '',
                    q5_element5: formData.get('q5_element5') || ''
                };
                
                console.log('üì§ Envoi des donn√©es:', responses);
                
                const docRef = await db.collection('dnb_vigie_technolab').add(responses);
                
                console.log('‚úÖ Document enregistr√© avec ID:', docRef.id);
                
                btn.disabled = false;
                btn.textContent = originalText;
                
                document.getElementById('successMessage').style.display = 'block';
                document.getElementById('errorMessage').style.display = 'none';
                document.getElementById('successMessage').scrollIntoView({ behavior: 'smooth' });
                
                setTimeout(() => {
                    form.reset();
                    formModified = false;
                    document.getElementById('successMessage').style.display = 'none';
                }, 5000);
                
            } catch (error) {
                console.error('‚ùå Erreur Firebase:', error);
                
                btn.disabled = false;
                btn.textContent = originalText;
                
                document.getElementById('errorText').textContent = error.message;
                document.getElementById('errorMessage').style.display = 'block';
                document.getElementById('successMessage').style.display = 'none';
            }
        });

        // Gestion r√©initialisation
        document.getElementById('dnbForm').addEventListener('reset', function(e) {
            if (!confirm('√ätes-vous s√ªr de vouloir effacer toutes vos r√©ponses ?')) {
                e.preventDefault();
            } else {
                formModified = false;
                document.getElementById('successMessage').style.display = 'none';
                document.getElementById('errorMessage').style.display = 'none';
            }
        });

        // Auto-focus champs binaires
        const binaryInputs = document.querySelectorAll('.binary-box');
        binaryInputs.forEach((input, index) => {
            input.addEventListener('input', function() {
                if (this.value.length === 1 && index < binaryInputs.length - 1) {
                    binaryInputs[index + 1].focus();
                }
            });
        });
    </script>
</body>
</html>
